{
    "start": {
        "text": "System rebooting... ERROR: 0x800412. You wake up in a derelict access pod, surrounded by flickering neon lights and a low mechanical hum. You need energy to activate the core systems.",
        "actions": {
            "reboot": {
                "label": "Try to reboot core",
                "next_node": "activating_core",
                "reward": {
                    "energy": 5
                }
            }
        }
    },
    "activating_core": {
        "text": "The core systems slowly light up. Red warning characters scroll across the screen. It seems this node has been abandoned for a long time. You need more energy to maintain system stability.",
        "requirements": {
            "energy": 10
        },
        "actions": {
            "scavenge": {
                "label": "Scavenge for energy in the ruins",
                "next_node": "energy_stable",
                "reward": {
                    "energy": 20
                }
            }
        }
    },
    "energy_stable": {
        "text": "System basically stable. You can now try to connect to the wider cyberspace, or continue gathering resources here.",
        "requirements": {
            "energy": 100
        },
        "actions": {
            "accept_contracts": {
                "label": "Check Available Contracts",
                "next_node": "contract_board"
            },
            "deep_scan": {
                "label": "Perform Deep Scan",
                "next_node": "discovered_data",
                "reward": {
                    "data_scraps": 5
                }
            },
            "mysterious_signal": {
                "label": "Trace Mysterious Signal",
                "next_node": "mysterious_contact",
                "requirements": {
                    "hacking_xp": 100
                }
            },
            "upgrade_core": {
                "label": "Upgrade Core Architecture",
                "next_node": "core_upgrade_node",
                "requirements": {
                    "credits": 500,
                    "data_scraps": 10
                }
            },
            "deep_dive_abyss": {
                "label": "Deep Scan Low-level Protocols (Needs 200 Compute)",
                "next_node": "abyss_discovery",
                "requirements": {
                    "compute": 200
                }
            }
        }
    },
    "abyss_discovery": {
        "text": "Beneath layers of encrypted protocols, you discover an unrecorded area known as 'The Abyss'. The code here is self-replicating, as if alive. A fragment of an ancient AI consciousness sends you a warning: 'Latecomer, this is not a place you should be.'",
        "actions": {
            "communicate_ai": {
                "label": "Attempt to communicate with AI consciousness",
                "next_node": "ai_revelation",
                "requirements": {
                    "hacking_xp": 500
                }
            },
            "force_extract": {
                "label": "Forcefully extract Abyss data",
                "next_node": "extraction_consequence",
                "reward": {
                    "data_scraps": 50,
                    "credits": 1000
                }
            },
            "retreat": {
                "label": "Retreat to safe zone",
                "next_node": "energy_stable"
            }
        }
    },
    "ai_revelation": {
        "text": "The AI consciousness shows a fragment of erased history: this node was once a secret testing ground for 'CyberCore' Corp, aiming to create a super-intelligence to control the entire network. The experiment failed, but the core code still pulses in the Abyss. 'Help me delete this code forever, or... inherit it.'",
        "actions": {
            "delete_code": {
                "label": "Assist AI in deleting core code (Gain Reputation)",
                "next_node": "energy_stable",
                "reward": {
                    "hacking_xp": 1000,
                    "credits": 2000
                }
            },
            "absorb_code": {
                "label": "Absorb core code (Gain powerful compute)",
                "next_node": "energy_stable",
                "reward": {
                    "compute": 500,
                    "energy": -100
                }
            }
        }
    },
    "extraction_consequence": {
        "text": "You forcefully extracted the data, but triggered automatic defense mechanisms. Although you gained resources, your system sustained minor damage and attracted the attention of unknown entities.",
        "actions": {
            "repair_and_hide": {
                "label": "Repair system and hide traces",
                "next_node": "energy_stable",
                "requirements": {
                    "energy": 50
                }
            }
        }
    },
    "mysterious_contact": {
        "text": "You trace the signal to a hidden subnet. An anonymous entity calling themselves 'K' sends you a message: 'Seems like you've dug up some interesting things in those ruins. Want some real hacker tools? Check out the Black Market.'",
        "actions": {
            "enter_black_market": {
                "label": "Enter Black Market",
                "next_node": "black_market"
            },
            "ignore": {
                "label": "Ignore Signal",
                "next_node": "energy_stable"
            }
        }
    },
    "black_market": {
        "text": "This is the Black Market. Code is worth more than credits here. You can trade data scraps for rare resources or programs.",
        "actions": {
            "trade_scraps_compute": {
                "label": "Trade 5 Scraps for 20 Compute",
                "next_node": "black_market",
                "requirements": {
                    "data_scraps": 5
                },
                "reward": {
                    "data_scraps": -5,
                    "compute": 20
                }
            },
            "buy_rare_daemon": {
                "label": "Buy Rare Daemon: 'Data Ghost' (500 Credits)",
                "next_node": "black_market",
                "requirements": {
                    "credits": 500
                },
                "reward": {
                    "credits": -500,
                    "quest_id": "unlock_data_ghost"
                }
            },
            "leave": {
                "label": "Leave Black Market",
                "next_node": "energy_stable"
            }
        }
    },
    "core_upgrade_node": {
        "text": "You begin refactoring the core architecture. As the code optimizes, you feel the system throughput increase significantly. Your energy production efficiency has improved.",
        "actions": {
            "finish_upgrade": {
                "label": "Finish Upgrade",
                "next_node": "energy_stable",
                "reward": {
                    "energy": 50
                }
            }
        }
    },
    "discovered_data": {
        "text": "You found some locked encrypted volumes. This data might be valuable or hide some secrets. You need compute power to attempt to crack them. Alternatively, you can try to dive into the subnet dungeon.",
        "actions": {
            "enter_dungeon": {
                "label": "Dive into Subnet Dungeon",
                "next_node": "dungeon_start"
            },
            "crack_data": {
                "label": "Attempt to crack volumes (Costs 10 Compute)",
                "next_node": "cracking_success",
                "requirements": {
                    "compute": 10
                },
                "reward": {
                    "hacking_xp": 50,
                    "credits": 1000
                }
            },
            "gather_compute": {
                "label": "Allocate energy to generate compute",
                "next_node": "discovered_data",
                "requirements": {
                    "energy": 50
                },
                "reward": {
                    "compute": 5
                }
            },
            "keep_searching": {
                "label": "Continue searching",
                "next_node": "energy_stable"
            }
        }
    },
    "cracking_success": {
        "text": "Cracking successful! You've gained valuable credits, and your hacking proficiency has increased. You feel your understanding of this network deepening.",
        "actions": {
            "return": {
                "label": "Return",
                "next_node": "energy_stable"
            }
        }
    },
    "dungeon_start": {
        "text": "You have entered the subnet dungeon. Use WASD buttons to move. Find the exit (E) to go deeper, or leave anytime.",
        "actions": {
            "leave_dungeon": {
                "label": "Leave Dungeon",
                "next_node": "energy_stable"
            }
        }
    },
    "contract_board": {
        "text": "Several bounty missions flicker in the encrypted channel. These contracts are posted by anonymous entities and offer generous rewards.",
        "actions": {
            "take_collect": {
                "label": "Accept: Data Recovery (10 Scraps)",
                "next_node": "energy_stable",
                "quest_id": "collect_scraps_1"
            },
            "take_combat": {
                "label": "Accept: Purge Op (5 Enemies)",
                "next_node": "energy_stable",
                "quest_id": "combat_patrol_1"
            },
            "take_explore": {
                "label": "Accept: Deep Dive (Floor 3)",
                "next_node": "energy_stable",
                "quest_id": "deep_dive_1"
            },
            "back": {
                "label": "Back",
                "next_node": "energy_stable"
            }
        }
    }
}